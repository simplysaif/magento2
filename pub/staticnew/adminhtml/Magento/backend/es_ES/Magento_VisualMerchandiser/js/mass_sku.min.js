define(['jquery'],function($){'use strict';$.widget('mage.visualMerchandiserMassSku',{options:{massAssignButton:null,massAssignUrl:null,messagesContainer:'[data-role=messages]'},form:null,_create:function(){this.form=this.element.find('form');this._bind();},_bind:function(){$(this.options.massAssignButton).on('click',$.proxy(this._massAssignAction,this));},_massAssignAction:function(event){var button=$(Event.element(event)),action={action:button.attr('role')};$.ajax({type:'POST',data:this.form.serialize()+'&'+$.param(action),url:this.options.massAssignUrl,context:$('body'),showLoader:true,success:$.proxy(this._massActionSuccess,this)});},_massActionSuccess:function(response){this._validateAjax(response);this.element.find(this.options.messagesContainer).html(response.html_message);this.element.trigger('requestReload',{'action':response.action,'ids':response.ids});},_validateAjax:function(response){if(response.ajaxExpired&&response.ajaxRedirect){setLocation(response.ajaxRedirect);}else if(response.url){setLocation(response.url);}}});return $.mage.visualMerchandiserMassSku;});