define([],function(){'use strict';function _isJSON(data){try{JSON.parse(data);}catch(e){return false;}
return true;}
function _stringProcessor(data,placeholder,uenc){if(data&&~data.indexOf(placeholder)){return data.replace(placeholder,uenc);}
return data;}
function _objectProcessor(data,placeholder,uenc){data=JSON.parse(data);if(data.hasOwnProperty('action')){data.action=_stringProcessor(data.action,placeholder,uenc);}
if(data.hasOwnProperty('data')&&data.data.hasOwnProperty('uenc')){data.data.uenc=uenc;}
return JSON.stringify(data);}
return function(data,placeholder){var uenc=btoa(window.location.href).replace('+/=','-_,');placeholder=placeholder||encodeURI('%uenc%');return _isJSON(data)?_objectProcessor(data,placeholder,uenc):_stringProcessor(data,placeholder,uenc);};});