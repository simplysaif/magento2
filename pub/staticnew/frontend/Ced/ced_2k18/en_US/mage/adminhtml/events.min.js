define(['Magento_Ui/js/modal/alert','prototype'],function(alert){window.varienEvents=Class.create();varienEvents.prototype={initialize:function(){this.arrEvents={};this.eventPrefix='';},attachEventHandler:function(eventName,handler){var asynchVar,handlerObj;if(typeof handler=='undefined'||handler==null){return;}
eventName+=this.eventPrefix;if(this.arrEvents[eventName]==null){this.arrEvents[eventName]=[];}
asynchVar=arguments.length>2?arguments[2]:false;handlerObj={method:handler,asynch:asynchVar};this.arrEvents[eventName].push(handlerObj);},removeEventHandler:function(eventName,handler){eventName+=this.eventPrefix;if(this.arrEvents[eventName]!=null){this.arrEvents[eventName]=this.arrEvents[eventName].reject(function(obj){return obj.method==handler;});}},clearEventHandlers:function(eventName){eventName+=this.eventPrefix;this.arrEvents[eventName]=null;},clearAllEventHandlers:function(){this.arrEvents={};},fireEvent:function(eventName){var evtName=eventName+this.eventPrefix,results=[],result,len,i,eventArgs,method,eventHandler;if(this.arrEvents[evtName]!=null){len=this.arrEvents[evtName].length;for(i=0;i<len;i++){try{if(arguments.length>1){if(this.arrEvents[evtName][i].asynch){eventArgs=arguments[1];method=this.arrEvents[evtName][i].method.bind(this);setTimeout(function(){method(eventArgs);},10);}else{result=this.arrEvents[evtName][i].method(arguments[1]);}}else{if(this.arrEvents[evtName][i].asynch){eventHandler=this.arrEvents[evtName][i].method;setTimeout(eventHandler,1);}else if(this.arrEvents&&this.arrEvents[evtName]&&this.arrEvents[evtName][i]&&this.arrEvents[evtName][i].method){result=this.arrEvents[evtName][i].method();}}
results.push(result);}
catch(e){if(this.id){alert({content:'error: error in '+this.id+'.fireEvent():\n\nevent name: '+
eventName+'\n\nerror message: '+e.message});}else{alert({content:'error: error in [unknown object].fireEvent():\n\nevent name: '+
eventName+'\n\nerror message: '+e.message});}}}}
return results;}};window.varienGlobalEvents=new varienEvents();});