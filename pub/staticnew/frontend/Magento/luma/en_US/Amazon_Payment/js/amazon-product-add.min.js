define(['jquery','Magento_Customer/js/customer-data','amazonCore','jquery/ui'],function($,customerData){'use strict';var _this,addedViaAmazon=false;$.widget('amazon.AmazonProductAdd',{options:{addToCartForm:'#product_addtocart_form'},_create:function(){_this=this;this.setupTriggers();},setupTriggers:function(){this.cart=customerData.get('cart');this.cart.subscribe(function(){if(addedViaAmazon){addedViaAmazon=false;$('.login-with-amazon img').trigger('click');}},this);$('.amazon-addtoCart').on('click',function(){if($(_this.options.addToCartForm).valid()){addedViaAmazon=true;$(_this.options.addToCartForm).submit();}});}});return $.amazon.AmazonProductAdd;});