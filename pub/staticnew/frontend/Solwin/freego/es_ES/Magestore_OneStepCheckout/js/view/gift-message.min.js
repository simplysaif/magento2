define(['jquery','uiComponent','Magestore_OneStepCheckout/js/model/gift-message','Magento_GiftMessage/js/model/gift-options','Magestore_OneStepCheckout/js/action/gift-options'],function($,Component,GiftMessage,giftOptions,giftOptionsService){'use strict';return Component.extend({formBlockVisibility:null,resultBlockVisibility:null,model:{},initialize:function(){var self=this,model;this._super().observe('formBlockVisibility').observe({'resultBlockVisibility':false});this.itemId=this.itemId||'orderLevel';model=new GiftMessage(this.itemId);giftOptions.addOption(model);this.model=model;this.model.getObservable('isClear').subscribe(function(value){if(value==true){self.formBlockVisibility(false);self.model.getObservable('alreadyAdded')(true);}});this.isResultBlockVisible();},isResultBlockVisible:function(){var self=this;if(this.model.getObservable('alreadyAdded')()){this.resultBlockVisibility(true);}
this.model.getObservable('additionalOptionsApplied').subscribe(function(value){if(value==true){self.resultBlockVisibility(true);}});},getObservable:function(key){return this.model.getObservable(key);},toggleFormBlockVisibility:function(){if(!this.model.getObservable('alreadyAdded')()){this.formBlockVisibility(!this.formBlockVisibility());if($("#allow_gift_messages").attr('checked')=='checked'){$('#gift-message-form').show();$('#allow-gift-message-container').show();}else{$('#gift-message-form').hide();$('#allow-gift-message-container').hide();}}else{this.resultBlockVisibility(!this.resultBlockVisibility());}
return true;},editOptions:function(){this.resultBlockVisibility(false);this.formBlockVisibility(true);},deleteOptions:function(){return giftOptionsService(this.model,true);},hideFormBlock:function(){this.formBlockVisibility(false);if(this.model.getObservable('alreadyAdded')()){this.resultBlockVisibility(true);}},hasActiveOptions:function(){var regionData=this.getRegion('additionalOptions'),options=regionData();for(var i=0;i<options.length;i++){if(options[i].isActive()){return true;}}
return false;},isActive:function(){return this.model.isGiftMessageAvailable();},submitOptions:function(){return giftOptionsService(this.model);},toggleGiftMessage:function(){return true;}});});