define(['jquery','mage/template','jquery/ui'],function($,mageTemplate){'use strict';$.widget('mage.notification',{options:{templates:{global:'<div data-role="messages" id="messages">'+'<div class="message <% if (data.error) { %>error<% } %>"><div><%- data.message %></div></div>'+'</div>',error:'<div data-role="messages" id="messages">'+'<div class="messages"><div class="message message-error error">'+'<div data-ui-id="messages-message-error"><%- data.message %></div></div>'+'</div></div>'}},placeholder:'[data-role=messages]',_create:function(){$(document).on('ajaxComplete ajaxError',$.proxy(this._add,this));},_add:function(event,jqXHR){var response;try{response=JSON.parse(jqXHR.responseText);if(response&&response.error&&response['html_message']){$(this.placeholder).html(response['html_message']);}}catch(e){}},add:function(data){var template=data.error?this.options.templates.error:this.options.templates.global,message=mageTemplate(template,{data:data}),messageContainer;if(typeof data.insertMethod==='function'){data.insertMethod(message);}else{messageContainer=data.messageContainer||this.placeholder;$(messageContainer).prepend(message);}
return this;},clear:function(){$(this.placeholder).html('');}});return $.mage.notification;});