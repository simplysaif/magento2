define(['jquery','domReady!'],function($){'use strict';function consoleScroll(){var logData=document.getElementById('log_data'),dh=logData.scrollHeight,ch=logData.clientHeight;if(dh>ch){logData.scrollTop=dh-ch;}}
function doUpdate(log,url){$.post(url,{log:log},function(json){$('#log_data').html(json.content);$('#connector-log-header').html(json.header);consoleScroll();});}
return function(logUpdater){consoleScroll();$('#connector-log-selector').change(function(){doUpdate($('#connector-log-selector').val(),logUpdater.url);});$('#connector-log-reloader').click(function(){doUpdate($('#connector-log-selector').val(),logUpdater.url);});};});