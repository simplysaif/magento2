define(['ko','uiComponent','Magento_Checkout/js/model/quote','Magento_Catalog/js/price-utils','Magento_CustomerBalance/js/action/use-balance'],function(ko,component,quote,priceUtils,useBalanceAction){'use strict';var amountSubstracted=ko.observable(window.checkoutConfig.payment.customerBalance.amountSubstracted),isActive=ko.pureComputed(function(){var totals=quote.getTotals();return!amountSubstracted()&&totals()['grand_total']>0;});return component.extend({defaults:{template:'Magento_CustomerBalance/payment/customer-balance',isEnabled:true},isAvailable:window.checkoutConfig.payment.customerBalance.isAvailable,amountSubstracted:window.checkoutConfig.payment.customerBalance.amountSubstracted,usedAmount:window.checkoutConfig.payment.customerBalance.usedAmount,balance:window.checkoutConfig.payment.customerBalance.balance,initObservable:function(){this._super().observe('isEnabled');return this;},isActive:function(){return isActive();},formatBalance:function(){return priceUtils.formatPrice(this.balance,quote.getPriceFormat());},sendRequest:function(){amountSubstracted(true);useBalanceAction();}});});