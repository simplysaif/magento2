(function(tinymce){var DOM=tinymce.DOM,Event=tinymce.dom.Event,extend=tinymce.extend,Dispatcher=tinymce.util.Dispatcher,each=tinymce.each,isGecko=tinymce.isGecko,isIE=tinymce.isIE,isWebKit=tinymce.isWebKit,is=tinymce.is,ThemeManager=tinymce.ThemeManager,PluginManager=tinymce.PluginManager,inArray=tinymce.inArray,grep=tinymce.grep,explode=tinymce.explode;tinymce.create('tinymce.Editor',{Editor:function(id,s){var t=this;t.id=t.editorId=id;t.execCommands={};t.queryStateCommands={};t.queryValueCommands={};t.isNotDirty=false;t.plugins={};each(['onPreInit','onBeforeRenderUI','onPostRender','onInit','onRemove','onActivate','onDeactivate','onClick','onEvent','onMouseUp','onMouseDown','onDblClick','onKeyDown','onKeyUp','onKeyPress','onContextMenu','onSubmit','onReset','onPaste','onPreProcess','onPostProcess','onBeforeSetContent','onBeforeGetContent','onSetContent','onGetContent','onLoadContent','onSaveContent','onNodeChange','onChange','onBeforeExecCommand','onExecCommand','onUndo','onRedo','onVisualAid','onSetProgressState'],function(e){t[e]=new Dispatcher(t);});t.settings=s=extend({id:id,language:'en',docs_language:'en',theme:'simple',skin:'default',delta_width:0,delta_height:0,popup_css:'',plugins:'',document_base_url:tinymce.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:tinymce.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':'<!DOCTYPE>',visual_table_class:'mceItemTable',visual:1,font_size_style_values:'xx-small,x-small,small,medium,large,x-large,xx-large',font_size_legacy_values:'xx-small,small,medium,large,x-large,xx-large,300%',apply_source_formatting:1,directionality:'ltr',forced_root_block:'p',hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:'30px',keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:true,indent:'simple',indent_before:'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr',indent_after:'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr',validate:true,entity_encoding:'named',url_converter:t.convertURL,url_converter_scope:t,ie7_compat:true},s);t.documentBaseURI=new tinymce.util.URI(s.document_base_url||tinymce.documentBaseURL,{base_uri:tinyMCE.baseURI});t.baseURI=tinymce.baseURI;t.contentCSS=[];t.execCallback('setup',t);},render:function(nst){var t=this,s=t.settings,id=t.id,sl=tinymce.ScriptLoader;if(!Event.domLoaded){Event.add(document,'init',function(){t.render();});return;}
tinyMCE.settings=s;if(!t.getElement())
return;if(tinymce.isIDevice&&!tinymce.isIOS5)
return;if(!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&s.hidden_input&&DOM.getParent(id,'form'))
DOM.insertAfter(DOM.create('input',{type:'hidden',name:id}),id);if(tinymce.WindowManager)
t.windowManager=new tinymce.WindowManager(t);if(s.encoding=='xml'){t.onGetContent.add(function(ed,o){if(o.save)
o.content=DOM.encode(o.content);});}
if(s.add_form_submit_trigger){t.onSubmit.addToTop(function(){if(t.initialized){t.save();t.isNotDirty=1;}});}
if(s.add_unload_trigger){t._beforeUnload=tinyMCE.onBeforeUnload.add(function(){if(t.initialized&&!t.destroyed&&!t.isHidden())
t.save({format:'raw',no_events:true});});}
tinymce.addUnload(t.destroy,t);if(s.submit_patch){t.onBeforeRenderUI.add(function(){var n=t.getElement().form;if(!n)
return;if(n._mceOldSubmit)
return;if(!n.submit.nodeType&&!n.submit.length){t.formElement=n;n._mceOldSubmit=n.submit;n.submit=function(){tinymce.triggerSave();t.isNotDirty=1;return t.formElement._mceOldSubmit(t.formElement);};}
n=null;});}
function loadScripts(){if(s.language&&s.language_load!==false)
sl.add(tinymce.baseURL+'/langs/'+s.language+'.js');if(s.theme&&s.theme.charAt(0)!='-'&&!ThemeManager.urls[s.theme])
ThemeManager.load(s.theme,'themes/'+s.theme+'/editor_template'+tinymce.suffix+'.js');each(explode(s.plugins),function(p){if(p&&!PluginManager.urls[p]){if(p.charAt(0)=='-'){p=p.substr(1,p.length);var dependencies=PluginManager.dependencies(p);each(dependencies,function(dep){var defaultSettings={prefix:'plugins/',resource:dep,suffix:'/editor_plugin'+tinymce.suffix+'.js'};var dep=PluginManager.createUrl(defaultSettings,dep);PluginManager.load(dep.resource,dep);});}else{if(p=='safari'){return;}
PluginManager.load(p,{prefix:'plugins/',resource:p,suffix:'/editor_plugin'+tinymce.suffix+'.js'});}}});sl.loadQueue(function(){if(!t.removed)
t.init();});};loadScripts();},init:function(){var n,t=this,s=t.settings,w,h,e=t.getElement(),o,ti,u,bi,bc,re,i,initializedPlugins=[];tinymce.add(t);s.aria_label=s.aria_label||DOM.getAttrib(e,'aria-label',t.getLang('aria.rich_text_area'));if(s.theme){s.theme=s.theme.replace(/-/,'');o=ThemeManager.get(s.theme);t.theme=new o();if(t.theme.init&&s.init_theme)
t.theme.init(t,ThemeManager.urls[s.theme]||tinymce.documentBaseURL.replace(/\/$/,''));}
function initPlugin(p){var c=PluginManager.get(p),u=PluginManager.urls[p]||tinymce.documentBaseURL.replace(/\/$/,''),po;if(c&&tinymce.inArray(initializedPlugins,p)===-1){each(PluginManager.dependencies(p),function(dep){initPlugin(dep);});po=new c(t,u);t.plugins[p]=po;if(po.init){po.init(t,u);initializedPlugins.push(p);}}}
each(explode(s.plugins.replace(/\-/g,'')),initPlugin);if(s.popup_css!==false){if(s.popup_css)
s.popup_css=t.documentBaseURI.toAbsolute(s.popup_css);else
s.popup_css=t.baseURI.toAbsolute("themes/"+s.theme+"/skins/"+s.skin+"/dialog.css");}
if(s.popup_css_add)
s.popup_css+=','+t.documentBaseURI.toAbsolute(s.popup_css_add);t.controlManager=new tinymce.ControlManager(t);if(s.custom_undo_redo){t.onBeforeExecCommand.add(function(ed,cmd,ui,val,a){if(cmd!='Undo'&&cmd!='Redo'&&cmd!='mceRepaint'&&(!a||!a.skip_undo))
t.undoManager.beforeChange();});t.onExecCommand.add(function(ed,cmd,ui,val,a){if(cmd!='Undo'&&cmd!='Redo'&&cmd!='mceRepaint'&&(!a||!a.skip_undo))
t.undoManager.add();});}
t.onExecCommand.add(function(ed,c){if(!/^(FontName|FontSize)$/.test(c))
t.nodeChanged();});if(isGecko){function repaint(a,o){if(!o||!o.initial)
t.execCommand('mceRepaint');};t.onUndo.add(repaint);t.onRedo.add(repaint);t.onSetContent.add(repaint);}
t.onBeforeRenderUI.dispatch(t,t.controlManager);if(s.render_ui){w=s.width||e.style.width||e.offsetWidth;h=s.height||e.style.height||e.offsetHeight;t.orgDisplay=e.style.display;re=/^[0-9\.]+(|px)$/i;if(re.test(''+w))
w=Math.max(parseInt(w)+(o.deltaWidth||0),100);if(re.test(''+h))
h=Math.max(parseInt(h)+(o.deltaHeight||0),100);o=t.theme.renderUI({targetNode:e,width:w,height:h,deltaWidth:s.delta_width,deltaHeight:s.delta_height});t.editorContainer=o.editorContainer;}
if(s.content_editable){e=n=o=null;return t.setupContentEditable();}
if(document.domain&&location.hostname!=document.domain)
tinymce.relaxedDomain=document.domain;DOM.setStyles(o.sizeContainer||o.editorContainer,{width:w,height:h});if(s.content_css){tinymce.each(explode(s.content_css),function(u){t.contentCSS.push(t.documentBaseURI.toAbsolute(u));});}
h=(o.iframeHeight||h)+(typeof(h)=='number'?(o.deltaHeight||0):'');if(h<100)
h=100;t.iframeHTML=s.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(s.document_base_url!=tinymce.documentBaseURL)
t.iframeHTML+='<base href="'+t.documentBaseURI.getURI()+'" />';if(s.ie7_compat)
t.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />';else
t.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />';t.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(i=0;i<t.contentCSS.length;i++){t.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+t.contentCSS[i]+'" />';}
bi=s.body_id||'tinymce';if(bi.indexOf('=')!=-1){bi=t.getParam('body_id','','hash');bi=bi[t.id]||bi;}
bc=s.body_class||'';if(bc.indexOf('=')!=-1){bc=t.getParam('body_class','','hash');bc=bc[t.id]||'';}
t.iframeHTML+='</head><body id="'+bi+'" class="mceContentBody '+bc+'"><br></body></html>';if(tinymce.relaxedDomain&&(isIE||(tinymce.isOpera&&parseFloat(opera.version())<11))){u='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+t.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()';}
n=DOM.add(o.iframeContainer,'iframe',{id:t.id+"_ifr",src:u||'javascript:""',frameBorder:'0',allowTransparency:"true",title:s.aria_label,style:{width:'100%',height:h,display:'block'}});t.contentAreaContainer=o.iframeContainer;DOM.get(o.editorContainer).style.display=t.orgDisplay;DOM.get(t.id).style.display='none';DOM.setAttrib(t.id,'aria-hidden',true);if(!tinymce.relaxedDomain||!u)
t.setupIframe();e=n=o=null;},setupIframe:function(){var t=this,s=t.settings,e=DOM.get(t.id),d=t.getDoc(),h,b;if(!isIE||!tinymce.relaxedDomain){d.open();d.write(t.iframeHTML);d.close();if(tinymce.relaxedDomain)
d.domain=tinymce.relaxedDomain;}
b=t.getBody();b.disabled=true;if(!s.readonly)
b.contentEditable=true;b.disabled=false;t.schema=new tinymce.html.Schema(s);t.dom=new tinymce.dom.DOMUtils(t.getDoc(),{keep_values:true,url_converter:t.convertURL,url_converter_scope:t,hex_colors:s.force_hex_style_colors,class_filter:s.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:t.schema});t.parser=new tinymce.html.DomParser(s,t.schema);if(!t.settings.allow_html_in_named_anchor){t.parser.addAttributeFilter('name',function(nodes,name){var i=nodes.length,sibling,prevSibling,parent,node;while(i--){node=nodes[i];if(node.name==='a'&&node.firstChild){parent=node.parent;sibling=node.lastChild;do{prevSibling=sibling.prev;parent.insert(sibling,node);sibling=prevSibling;}while(sibling);}}});}
t.parser.addAttributeFilter('src,href,style',function(nodes,name){var i=nodes.length,node,dom=t.dom,value,internalName;while(i--){node=nodes[i];value=node.attr(name);internalName='data-mce-'+name;if(!node.attributes.map[internalName]){if(name==="style")
node.attr(internalName,dom.serializeStyle(dom.parseStyle(value),node.name));else
node.attr(internalName,t.convertURL(value,name,node.name));}}});t.parser.addNodeFilter('script',function(nodes,name){var i=nodes.length,node;while(i--){node=nodes[i];node.attr('type','mce-'+(node.attr('type')||'text/javascript'));}});t.parser.addNodeFilter('#cdata',function(nodes,name){var i=nodes.length,node;while(i--){node=nodes[i];node.type=8;node.name='#comment';node.value='[CDATA['+node.value+']]';}});t.parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div',function(nodes,name){var i=nodes.length,node,nonEmptyElements=t.schema.getNonEmptyElements();while(i--){node=nodes[i];if(node.isEmpty(nonEmptyElements))
node.empty().append(new tinymce.html.Node('br',1)).shortEnded=true;}});t.serializer=new tinymce.dom.Serializer(s,t.dom,t.schema);t.selection=new tinymce.dom.Selection(t.dom,t.getWin(),t.serializer);t.formatter=new tinymce.Formatter(this);t.formatter.register({alignleft:[{selector:'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li',styles:{textAlign:'left'}},{selector:'img,table',collapsed:false,styles:{'float':'left'}}],aligncenter:[{selector:'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li',styles:{textAlign:'center'}},{selector:'img',collapsed:false,styles:{display:'block',marginLeft:'auto',marginRight:'auto'}},{selector:'table',collapsed:false,styles:{marginLeft:'auto',marginRight:'auto'}}],alignright:[{selector:'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li',styles:{textAlign:'right'}},{selector:'img,table',collapsed:false,styles:{'float':'right'}}],alignfull:[{selector:'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li',styles:{textAlign:'justify'}}],bold:[{inline:'strong',remove:'all'},{inline:'span',styles:{fontWeight:'bold'}},{inline:'b',remove:'all'}],italic:[{inline:'em',remove:'all'},{inline:'span',styles:{fontStyle:'italic'}},{inline:'i',remove:'all'}],underline:[{inline:'span',styles:{textDecoration:'underline'},exact:true},{inline:'u',remove:'all'}],strikethrough:[{inline:'span',styles:{textDecoration:'line-through'},exact:true},{inline:'strike',remove:'all'}],forecolor:{inline:'span',styles:{color:'%value'},wrap_links:false},hilitecolor:{inline:'span',styles:{backgroundColor:'%value'},wrap_links:false},fontname:{inline:'span',styles:{fontFamily:'%value'}},fontsize:{inline:'span',styles:{fontSize:'%value'}},fontsize_class:{inline:'span',attributes:{'class':'%value'}},blockquote:{block:'blockquote',wrapper:1,remove:'all'},subscript:{inline:'sub'},superscript:{inline:'sup'},link:{inline:'a',selector:'a',remove:'all',split:true,deep:true,onmatch:function(node){return true;},onformat:function(elm,fmt,vars){each(vars,function(value,key){t.dom.setAttrib(elm,key,value);});}},removeformat:[{selector:'b,strong,em,i,font,u,strike',remove:'all',split:true,expand:false,block_expand:true,deep:true},{selector:'span',attributes:['style','class'],remove:'empty',split:true,expand:false,deep:true},{selector:'*',attributes:['style','class'],split:false,expand:false,deep:true}]});each('p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp'.split(/\s/),function(name){t.formatter.register(name,{block:name,remove:'all'});});t.formatter.register(t.settings.formats);t.undoManager=new tinymce.UndoManager(t);t.undoManager.onAdd.add(function(um,l){if(um.hasUndo())
return t.onChange.dispatch(t,l,um);});t.undoManager.onUndo.add(function(um,l){return t.onUndo.dispatch(t,l,um);});t.undoManager.onRedo.add(function(um,l){return t.onRedo.dispatch(t,l,um);});t.forceBlocks=new tinymce.ForceBlocks(t,{forced_root_block:s.forced_root_block});t.editorCommands=new tinymce.EditorCommands(t);t.serializer.onPreProcess.add(function(se,o){return t.onPreProcess.dispatch(t,o,se);});t.serializer.onPostProcess.add(function(se,o){return t.onPostProcess.dispatch(t,o,se);});t.onPreInit.dispatch(t);if(!s.gecko_spellcheck)
t.getBody().spellcheck=0;if(!s.readonly)
t._addEvents();t.controlManager.onPostRender.dispatch(t,t.controlManager);t.onPostRender.dispatch(t);t.quirks=new tinymce.util.Quirks(this);if(s.directionality)
t.getBody().dir=s.directionality;if(s.nowrap)
t.getBody().style.whiteSpace="nowrap";if(s.handle_node_change_callback){t.onNodeChange.add(function(ed,cm,n){t.execCallback('handle_node_change_callback',t.id,n,-1,-1,true,t.selection.isCollapsed());});}
if(s.save_callback){t.onSaveContent.add(function(ed,o){var h=t.execCallback('save_callback',t.id,o.content,t.getBody());if(h)
o.content=h;});}
if(s.onchange_callback){t.onChange.add(function(ed,l){t.execCallback('onchange_callback',t,l);});}
if(s.protect){t.onBeforeSetContent.add(function(ed,o){if(s.protect){each(s.protect,function(pattern){o.content=o.content.replace(pattern,function(str){return'<!--mce:protected '+escape(str)+'-->';});});}});}
if(s.convert_newlines_to_brs){t.onBeforeSetContent.add(function(ed,o){if(o.initial)
o.content=o.content.replace(/\r?\n/g,'<br />');});}
if(s.preformatted){t.onPostProcess.add(function(ed,o){o.content=o.content.replace(/^\s*<pre.*?>/,'');o.content=o.content.replace(/<\/pre>\s*$/,'');if(o.set)
o.content='<pre class="mceItemHidden">'+o.content+'</pre>';});}
if(s.verify_css_classes){t.serializer.attribValueFilter=function(n,v){var s,cl;if(n=='class'){if(!t.classesRE){cl=t.dom.getClasses();if(cl.length>0){s='';each(cl,function(o){s+=(s?'|':'')+o['class'];});t.classesRE=new RegExp('('+s+')','gi');}}
return!t.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(v)||t.classesRE.test(v)?v:'';}
return v;};}
if(s.cleanup_callback){t.onBeforeSetContent.add(function(ed,o){o.content=t.execCallback('cleanup_callback','insert_to_editor',o.content,o);});t.onPreProcess.add(function(ed,o){if(o.set)
t.execCallback('cleanup_callback','insert_to_editor_dom',o.node,o);if(o.get)
t.execCallback('cleanup_callback','get_from_editor_dom',o.node,o);});t.onPostProcess.add(function(ed,o){if(o.set)
o.content=t.execCallback('cleanup_callback','insert_to_editor',o.content,o);if(o.get)
o.content=t.execCallback('cleanup_callback','get_from_editor',o.content,o);});}
if(s.save_callback){t.onGetContent.add(function(ed,o){if(o.save)
o.content=t.execCallback('save_callback',t.id,o.content,t.getBody());});}
if(s.handle_event_callback){t.onEvent.add(function(ed,e,o){if(t.execCallback('handle_event_callback',e,ed,o)===false)
Event.cancel(e);});}
t.onSetContent.add(function(){t.addVisual(t.getBody());});if(s.padd_empty_editor){t.onPostProcess.add(function(ed,o){o.content=o.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,'');});}
if(isGecko){function fixLinks(ed,o){each(ed.dom.select('a'),function(n){var pn=n.parentNode;if(ed.dom.isBlock(pn)&&pn.lastChild===n)
ed.dom.add(pn,'br',{'data-mce-bogus':1});});};t.onExecCommand.add(function(ed,cmd){if(cmd==='CreateLink')
fixLinks(ed);});t.onSetContent.add(t.selection.onSetContent.add(fixLinks));}
t.load({initial:true,format:'html'});t.startContent=t.getContent({format:'raw'});t.undoManager.add();t.initialized=true;t.onInit.dispatch(t);t.execCallback('setupcontent_callback',t.id,t.getBody(),t.getDoc());t.execCallback('init_instance_callback',t);t.focus(true);t.nodeChanged({initial:1});each(t.contentCSS,function(u){t.dom.loadCSS(u);});if(s.auto_focus){setTimeout(function(){var ed=tinymce.get(s.auto_focus);ed.selection.select(ed.getBody(),1);ed.selection.collapse(1);ed.getBody().focus();ed.getWin().focus();},100);}
e=null;},setupContentEditable:function(){var t=this,s=t.settings,e=t.getElement();t.contentDocument=s.content_document||document;t.contentWindow=s.content_window||window;t.bodyElement=e;s.content_document=s.content_window=null;DOM.hide(e);e.contentEditable=t.getParam('content_editable_state',true);DOM.show(e);if(!s.gecko_spellcheck)
t.getDoc().body.spellcheck=0;t.dom=new tinymce.dom.DOMUtils(t.getDoc(),{keep_values:true,url_converter:t.convertURL,url_converter_scope:t,hex_colors:s.force_hex_style_colors,class_filter:s.class_filter,root_element:t.id,fix_ie_paragraphs:1,update_styles:1});t.serializer=new tinymce.dom.Serializer(s,t.dom,schema);t.selection=new tinymce.dom.Selection(t.dom,t.getWin(),t.serializer);t.forceBlocks=new tinymce.ForceBlocks(t,{forced_root_block:s.forced_root_block});t.editorCommands=new tinymce.EditorCommands(t);t.serializer.onPreProcess.add(function(se,o){return t.onPreProcess.dispatch(t,o,se);});t.serializer.onPostProcess.add(function(se,o){return t.onPostProcess.dispatch(t,o,se);});t.onPreInit.dispatch(t);t._addEvents();t.controlManager.onPostRender.dispatch(t,t.controlManager);t.onPostRender.dispatch(t);t.onSetContent.add(function(){t.addVisual(t.getBody());});t.startContent=t.getContent({format:'raw'});t.undoManager.add({initial:true});t.initialized=true;t.onInit.dispatch(t);t.focus(true);t.nodeChanged({initial:1});if(s.content_css){each(explode(s.content_css),function(u){t.dom.loadCSS(t.documentBaseURI.toAbsolute(u));});}
if(isIE){t.dom.bind(t.getElement(),'beforedeactivate',function(){t.lastSelectionBookmark=t.selection.getBookmark(1);});t.onBeforeExecCommand.add(function(ed,cmd,ui,val,o){if(!DOM.getParent(ed.selection.getStart(),function(n){return n==ed.getBody();}))
o.terminate=1;if(!DOM.getParent(ed.selection.getEnd(),function(n){return n==ed.getBody();}))
o.terminate=1;});}
e=null;},focus:function(sf){var oed,t=this,selection=t.selection,ce=t.settings.content_editable,ieRng,controlElm,doc=t.getDoc();if(!sf){ieRng=selection.getRng();if(ieRng.item){controlElm=ieRng.item(0);}
t._refreshContentEditable();selection.normalize();if(!ce)
t.getWin().focus();if(tinymce.isGecko){t.getBody().focus();}
if(controlElm&&controlElm.ownerDocument==doc){ieRng=doc.body.createControlRange();ieRng.addElement(controlElm);ieRng.select();}
if(ce){if(tinymce.isWebKit)
t.getWin().focus();else{if(tinymce.isIE)
t.getElement().setActive();else
t.getElement().focus();}}}
if(tinymce.activeEditor!=t){if((oed=tinymce.activeEditor)!=null)
oed.onDeactivate.dispatch(oed,t);t.onActivate.dispatch(t,oed);}
tinymce._setActive(t);},execCallback:function(n){var t=this,f=t.settings[n],s;if(!f)
return;if(t.callbackLookup&&(s=t.callbackLookup[n])){f=s.func;s=s.scope;}
if(is(f,'string')){s=f.replace(/\.\w+$/,'');s=s?tinymce.resolve(s):0;f=tinymce.resolve(f);t.callbackLookup=t.callbackLookup||{};t.callbackLookup[n]={func:f,scope:s};}
return f.apply(s||t,Array.prototype.slice.call(arguments,1));},translate:function(s){var c=this.settings.language||'en',i18n=tinymce.i18n;if(!s)
return'';return i18n[c+'.'+s]||s.replace(/{\#([^}]+)\}/g,function(a,b){return i18n[c+'.'+b]||'{#'+b+'}';});},getLang:function(n,dv){return tinymce.i18n[(this.settings.language||'en')+'.'+n]||(is(dv)?dv:'{#'+n+'}');},getParam:function(n,dv,ty){var tr=tinymce.trim,v=is(this.settings[n])?this.settings[n]:dv,o;if(ty==='hash'){o={};if(is(v,'string')){each(v.indexOf('=')>0?v.split(/[;,](?![^=;,]*(?:[;,]|$))/):v.split(','),function(v){v=v.split('=');if(v.length>1)
o[tr(v[0])]=tr(v[1]);else
o[tr(v[0])]=tr(v);});}else
o=v;return o;}
return v;},nodeChanged:function(o){var t=this,s=t.selection,n=s.getStart()||t.getBody();if(t.initialized){o=o||{};n=isIE&&n.ownerDocument!=t.getDoc()?t.getBody():n;o.parents=[];t.dom.getParent(n,function(node){if(node.nodeName=='BODY')
return true;o.parents.push(node);});t.onNodeChange.dispatch(t,o?o.controlManager||t.controlManager:t.controlManager,n,s.isCollapsed(),o);}},addButton:function(n,s){var t=this;t.buttons=t.buttons||{};t.buttons[n]=s;},addCommand:function(name,callback,scope){this.execCommands[name]={func:callback,scope:scope||this};},addQueryStateHandler:function(name,callback,scope){this.queryStateCommands[name]={func:callback,scope:scope||this};},addQueryValueHandler:function(name,callback,scope){this.queryValueCommands[name]={func:callback,scope:scope||this};},addShortcut:function(pa,desc,cmd_func,sc){var t=this,c;if(!t.settings.custom_shortcuts)
return false;t.shortcuts=t.shortcuts||{};if(is(cmd_func,'string')){c=cmd_func;cmd_func=function(){t.execCommand(c,false,null);};}
if(is(cmd_func,'object')){c=cmd_func;cmd_func=function(){t.execCommand(c[0],c[1],c[2]);};}
each(explode(pa),function(pa){var o={func:cmd_func,scope:sc||this,desc:desc,alt:false,ctrl:false,shift:false};each(explode(pa,'+'),function(v){switch(v){case'alt':case'ctrl':case'shift':o[v]=true;break;default:o.charCode=v.charCodeAt(0);o.keyCode=v.toUpperCase().charCodeAt(0);}});t.shortcuts[(o.ctrl?'ctrl':'')+','+(o.alt?'alt':'')+','+(o.shift?'shift':'')+','+o.keyCode]=o;});return true;},execCommand:function(cmd,ui,val,a){var t=this,s=0,o,st;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(cmd)&&(!a||!a.skip_focus))
t.focus();o={};t.onBeforeExecCommand.dispatch(t,cmd,ui,val,o);if(o.terminate)
return false;if(t.execCallback('execcommand_callback',t.id,t.selection.getNode(),cmd,ui,val)){t.onExecCommand.dispatch(t,cmd,ui,val,a);return true;}
if(o=t.execCommands[cmd]){st=o.func.call(o.scope,ui,val);if(st!==true){t.onExecCommand.dispatch(t,cmd,ui,val,a);return st;}}
each(t.plugins,function(p){if(p.execCommand&&p.execCommand(cmd,ui,val)){t.onExecCommand.dispatch(t,cmd,ui,val,a);s=1;return false;}});if(s)
return true;if(t.theme&&t.theme.execCommand&&t.theme.execCommand(cmd,ui,val)){t.onExecCommand.dispatch(t,cmd,ui,val,a);return true;}
if(t.editorCommands.execCommand(cmd,ui,val)){t.onExecCommand.dispatch(t,cmd,ui,val,a);return true;}
t.getDoc().execCommand(cmd,ui,val);t.onExecCommand.dispatch(t,cmd,ui,val,a);},queryCommandState:function(cmd){var t=this,o,s;if(t._isHidden())
return;if(o=t.queryStateCommands[cmd]){s=o.func.call(o.scope);if(s!==true)
return s;}
o=t.editorCommands.queryCommandState(cmd);if(o!==-1)
return o;try{return this.getDoc().queryCommandState(cmd);}catch(ex){}},queryCommandValue:function(c){var t=this,o,s;if(t._isHidden())
return;if(o=t.queryValueCommands[c]){s=o.func.call(o.scope);if(s!==true)
return s;}
o=t.editorCommands.queryCommandValue(c);if(is(o))
return o;try{return this.getDoc().queryCommandValue(c);}catch(ex){}},show:function(){var t=this;DOM.show(t.getContainer());DOM.hide(t.id);t.load();},hide:function(){var t=this,d=t.getDoc();if(isIE&&d)
d.execCommand('SelectAll');t.save();DOM.hide(t.getContainer());DOM.setStyle(t.id,'display',t.orgDisplay);},isHidden:function(){return!DOM.isHidden(this.id);},setProgressState:function(b,ti,o){this.onSetProgressState.dispatch(this,b,ti,o);return b;},load:function(o){var t=this,e=t.getElement(),h;if(e){o=o||{};o.load=true;h=t.setContent(is(e.value)?e.value:e.innerHTML,o);o.element=e;if(!o.no_events)
t.onLoadContent.dispatch(t,o);o.element=e=null;return h;}},save:function(o){var t=this,e=t.getElement(),h,f;if(!e||!t.initialized)
return;o=o||{};o.save=true;if(!o.no_events){t.undoManager.typing=false;t.undoManager.add();}
o.element=e;h=o.content=t.getContent(o);if(!o.no_events)
t.onSaveContent.dispatch(t,o);h=o.content;if(!/TEXTAREA|INPUT/i.test(e.nodeName)){e.innerHTML=h;if(f=DOM.getParent(t.id,'form')){each(f.elements,function(e){if(e.name==t.id){e.value=h;return false;}});}}else
e.value=h;o.element=e=null;return h;},setContent:function(content,args){var self=this,rootNode,body=self.getBody(),forcedRootBlockName;args=args||{};args.format=args.format||'html';args.set=true;args.content=content;if(!args.no_events)
self.onBeforeSetContent.dispatch(self,args);content=args.content;if(!tinymce.isIE&&(content.length===0||/^\s+$/.test(content))){forcedRootBlockName=self.settings.forced_root_block;if(forcedRootBlockName)
content='<'+forcedRootBlockName+'><br data-mce-bogus="1"></'+forcedRootBlockName+'>';else
content='<br data-mce-bogus="1">';body.innerHTML=content;self.selection.select(body,true);self.selection.collapse(true);return;}
if(args.format!=='raw'){content=new tinymce.html.Serializer({},self.schema).serialize(self.parser.parse(content));}
args.content=tinymce.trim(content);self.dom.setHTML(body,args.content);if(!args.no_events)
self.onSetContent.dispatch(self,args);self.selection.normalize();return args.content;},getContent:function(args){var self=this,content;args=args||{};args.format=args.format||'html';args.get=true;if(!args.no_events)
self.onBeforeGetContent.dispatch(self,args);if(args.format=='raw')
content=self.getBody().innerHTML;else
content=self.serializer.serialize(self.getBody(),args);args.content=tinymce.trim(content);if(!args.no_events)
self.onGetContent.dispatch(self,args);return args.content;},isDirty:function(){var self=this;return tinymce.trim(self.startContent)!=tinymce.trim(self.getContent({format:'raw',no_events:1}))&&!self.isNotDirty;},getContainer:function(){var t=this;if(!t.container)
t.container=DOM.get(t.editorContainer||t.id+'_parent');return t.container;},getContentAreaContainer:function(){return this.contentAreaContainer;},getElement:function(){return DOM.get(this.settings.content_element||this.id);},getWin:function(){var t=this,e;if(!t.contentWindow){e=DOM.get(t.id+"_ifr");if(e)
t.contentWindow=e.contentWindow;}
return t.contentWindow;},getDoc:function(){var t=this,w;if(!t.contentDocument){w=t.getWin();if(w)
t.contentDocument=w.document;}
return t.contentDocument;},getBody:function(){return this.bodyElement||this.getDoc().body;},convertURL:function(u,n,e){var t=this,s=t.settings;if(s.urlconverter_callback)
return t.execCallback('urlconverter_callback',u,e,true,n);if(!s.convert_urls||(e&&e.nodeName=='LINK')||u.indexOf('file:')===0)
return u;if(s.relative_urls)
return t.documentBaseURI.toRelative(u);u=t.documentBaseURI.toAbsolute(u,s.remove_script_host);return u;},addVisual:function(e){var t=this,s=t.settings;e=e||t.getBody();if(!is(t.hasVisual))
t.hasVisual=s.visual;each(t.dom.select('table,a',e),function(e){var v;switch(e.nodeName){case'TABLE':v=t.dom.getAttrib(e,'border');if(!v||v=='0'){if(t.hasVisual)
t.dom.addClass(e,s.visual_table_class);else
t.dom.removeClass(e,s.visual_table_class);}
return;case'A':v=t.dom.getAttrib(e,'name');if(v){if(t.hasVisual)
t.dom.addClass(e,'mceItemAnchor');else
t.dom.removeClass(e,'mceItemAnchor');}
return;}});t.onVisualAid.dispatch(t,e,t.hasVisual);},remove:function(){var t=this,e=t.getContainer();t.removed=1;t.hide();t.execCallback('remove_instance_callback',t);t.onRemove.dispatch(t);t.onExecCommand.listeners=[];tinymce.remove(t);DOM.remove(e);},destroy:function(s){var t=this;if(t.destroyed)
return;if(!s){tinymce.removeUnload(t.destroy);tinyMCE.onBeforeUnload.remove(t._beforeUnload);if(t.theme&&t.theme.destroy)
t.theme.destroy();t.controlManager.destroy();t.selection.destroy();t.dom.destroy();if(!t.settings.content_editable){Event.clear(t.getWin());Event.clear(t.getDoc());}
Event.clear(t.getBody());Event.clear(t.formElement);}
if(t.formElement){t.formElement.submit=t.formElement._mceOldSubmit;t.formElement._mceOldSubmit=null;}
t.contentAreaContainer=t.formElement=t.container=t.settings.content_element=t.bodyElement=t.contentDocument=t.contentWindow=null;if(t.selection)
t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null;t.destroyed=1;},_addEvents:function(){var t=this,i,s=t.settings,dom=t.dom,lo={mouseup:'onMouseUp',mousedown:'onMouseDown',click:'onClick',keyup:'onKeyUp',keydown:'onKeyDown',keypress:'onKeyPress',submit:'onSubmit',reset:'onReset',contextmenu:'onContextMenu',dblclick:'onDblClick',paste:'onPaste'};function eventHandler(e,o){var ty=e.type;if(t.removed)
return;if(t.onEvent.dispatch(t,e,o)!==false){t[lo[e.fakeType||e.type]].dispatch(t,e,o);}};each(lo,function(v,k){switch(k){case'contextmenu':dom.bind(t.getDoc(),k,eventHandler);break;case'paste':dom.bind(t.getBody(),k,function(e){eventHandler(e);});break;case'submit':case'reset':dom.bind(t.getElement().form||DOM.getParent(t.id,'form'),k,eventHandler);break;default:dom.bind(s.content_editable?t.getBody():t.getDoc(),k,eventHandler);}});dom.bind(s.content_editable?t.getBody():(isGecko?t.getDoc():t.getWin()),'focus',function(e){t.focus(true);});if(s.content_editable&&tinymce.isOpera){function doFocus(e){t.focus(true);};dom.bind(t.getBody(),'click',doFocus);dom.bind(t.getBody(),'keydown',doFocus);}
if(tinymce.isGecko){dom.bind(t.getDoc(),'DOMNodeInserted',function(e){var v;e=e.target;if(e.nodeType===1&&e.nodeName==='IMG'&&(v=e.getAttribute('data-mce-src')))
e.src=t.documentBaseURI.toAbsolute(v);});}
if(isGecko){function setOpts(){var t=this,d=t.getDoc(),s=t.settings;if(isGecko&&!s.readonly){t._refreshContentEditable();try{d.execCommand("styleWithCSS",0,false);}catch(ex){if(!t._isHidden())
try{d.execCommand("useCSS",0,true);}catch(ex){}}
if(!s.table_inline_editing)
try{d.execCommand('enableInlineTableEditing',false,false);}catch(ex){}
if(!s.object_resizing)
try{d.execCommand('enableObjectResizing',false,false);}catch(ex){}}};t.onBeforeExecCommand.add(setOpts);t.onMouseDown.add(setOpts);}
t.onMouseUp.add(t.nodeChanged);t.onKeyUp.add(function(ed,e){var c=e.keyCode;if((c>=33&&c<=36)||(c>=37&&c<=40)||c==13||c==45||c==46||c==8||(tinymce.isMac&&(c==91||c==93))||e.ctrlKey)
t.nodeChanged();});t.onKeyDown.add(function(ed,e){if(e.keyCode!=8)
return;var n=ed.selection.getRng().startContainer;var offset=ed.selection.getRng().startOffset;while(n&&n.nodeType&&n.nodeType!=1&&n.parentNode)
n=n.parentNode;if(n&&n.parentNode&&n.parentNode.tagName==='BLOCKQUOTE'&&n.parentNode.firstChild==n&&offset==0){ed.formatter.toggle('blockquote',null,n.parentNode);var rng=ed.selection.getRng();rng.setStart(n,0);rng.setEnd(n,0);ed.selection.setRng(rng);ed.selection.collapse(false);}});t.onReset.add(function(){t.setContent(t.startContent,{format:'raw'});});if(s.custom_shortcuts){if(s.custom_undo_redo_keyboard_shortcuts){t.addShortcut('ctrl+z',t.getLang('undo_desc'),'Undo');t.addShortcut('ctrl+y',t.getLang('redo_desc'),'Redo');}
t.addShortcut('ctrl+b',t.getLang('bold_desc'),'Bold');t.addShortcut('ctrl+i',t.getLang('italic_desc'),'Italic');t.addShortcut('ctrl+u',t.getLang('underline_desc'),'Underline');for(i=1;i<=6;i++)
t.addShortcut('ctrl+'+i,'',['FormatBlock',false,'h'+i]);t.addShortcut('ctrl+7','',['FormatBlock',false,'p']);t.addShortcut('ctrl+8','',['FormatBlock',false,'div']);t.addShortcut('ctrl+9','',['FormatBlock',false,'address']);function find(e){var v=null;if(!e.altKey&&!e.ctrlKey&&!e.metaKey)
return v;each(t.shortcuts,function(o){if(tinymce.isMac&&o.ctrl!=e.metaKey)
return;else if(!tinymce.isMac&&o.ctrl!=e.ctrlKey)
return;if(o.alt!=e.altKey)
return;if(o.shift!=e.shiftKey)
return;if(e.keyCode==o.keyCode||(e.charCode&&e.charCode==o.charCode)){v=o;return false;}});return v;};t.onKeyUp.add(function(ed,e){var o=find(e);if(o)
return Event.cancel(e);});t.onKeyPress.add(function(ed,e){var o=find(e);if(o)
return Event.cancel(e);});t.onKeyDown.add(function(ed,e){var o=find(e);if(o){o.func.call(o.scope);return Event.cancel(e);}});}
if(tinymce.isIE){dom.bind(t.getDoc(),'controlselect',function(e){var re=t.resizeInfo,cb;e=e.target;if(e.nodeName!=='IMG')
return;if(re)
dom.unbind(re.node,re.ev,re.cb);if(!dom.hasClass(e,'mceItemNoResize')){ev='resizeend';cb=dom.bind(e,ev,function(e){var v;e=e.target;if(v=dom.getStyle(e,'width')){dom.setAttrib(e,'width',v.replace(/[^0-9%]+/g,''));dom.setStyle(e,'width','');}
if(v=dom.getStyle(e,'height')){dom.setAttrib(e,'height',v.replace(/[^0-9%]+/g,''));dom.setStyle(e,'height','');}});}else{ev='resizestart';cb=dom.bind(e,'resizestart',Event.cancel,Event);}
re=t.resizeInfo={node:e,ev:ev,cb:cb};});}
if(tinymce.isOpera){t.onClick.add(function(ed,e){Event.prevent(e);});}
if(s.custom_undo_redo){function addUndo(){t.undoManager.typing=false;t.undoManager.add();};dom.bind(t.getDoc(),'focusout',function(e){if(!t.removed&&t.undoManager.typing)
addUndo();});t.dom.bind(t.dom.getRoot(),'dragend',function(e){addUndo();});t.onKeyUp.add(function(ed,e){var keyCode=e.keyCode;if((keyCode>=33&&keyCode<=36)||(keyCode>=37&&keyCode<=40)||keyCode==13||keyCode==45||e.ctrlKey)
addUndo();});t.onKeyDown.add(function(ed,e){var keyCode=e.keyCode,sel;if(keyCode==8){sel=t.getDoc().selection;if(sel&&sel.createRange&&sel.createRange().item){t.undoManager.beforeChange();ed.dom.remove(sel.createRange().item(0));addUndo();return Event.cancel(e);}}
if((keyCode>=33&&keyCode<=36)||(keyCode>=37&&keyCode<=40)||keyCode==13||keyCode==45){if(tinymce.isIE&&keyCode==13)
t.undoManager.beforeChange();if(t.undoManager.typing)
addUndo();return;}
if((keyCode<16||keyCode>20)&&keyCode!=224&&keyCode!=91&&!t.undoManager.typing){t.undoManager.beforeChange();t.undoManager.typing=true;t.undoManager.add();}});t.onMouseDown.add(function(){if(t.undoManager.typing)
addUndo();});}
if(tinymce.isGecko){function getAttributeApplyFunction(){var template=t.dom.getAttribs(t.selection.getStart().cloneNode(false));return function(){var target=t.selection.getStart();if(target!==t.getBody()){t.dom.setAttrib(target,"style",null);each(template,function(attr){target.setAttributeNode(attr.cloneNode(true));});}};}
function isSelectionAcrossElements(){var s=t.selection;return!s.isCollapsed()&&s.getStart()!=s.getEnd();}
t.onKeyPress.add(function(ed,e){var applyAttributes;if((e.keyCode==8||e.keyCode==46)&&isSelectionAcrossElements()){applyAttributes=getAttributeApplyFunction();t.getDoc().execCommand('delete',false,null);applyAttributes();return Event.cancel(e);}});t.dom.bind(t.getDoc(),'cut',function(e){var applyAttributes;if(isSelectionAcrossElements()){applyAttributes=getAttributeApplyFunction();t.onKeyUp.addToTop(Event.cancel,Event);setTimeout(function(){applyAttributes();t.onKeyUp.remove(Event.cancel,Event);},0);}});}},_refreshContentEditable:function(){var self=this,body,parent;if(self._isHidden()){body=self.getBody();parent=body.parentNode;parent.removeChild(body);parent.appendChild(body);body.focus();}},_isHidden:function(){var s;if(!isGecko)
return 0;s=this.selection.getSel();return(!s||!s.rangeCount||s.rangeCount==0);}});})(tinymce);