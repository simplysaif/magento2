define(['jquery','Magento_Ui/js/modal/confirm','jquery/ui','mage/decorate'],function($,confirm){'use strict';$.widget('mage.rmaTrackInfo',{options:{addTrackNumberBtnId:'#btn-add-track-number',trackingCarrierSelect:'#tracking_carrier_select',trackingNumberInput:'#tracking_number_input',rmaPleaseWait:'#rma-please-wait',trackInfoTable:'#track-info-table',trackInfoTbody:'#track-info-tbody'},_create:function(){var self=this;self.element.trigger('mage.setUpRmaOptions',self);$(this.options.trackInfoTable).decorate('table');$(this.options.addTrackNumberBtnId).on('click',$.proxy(self._addTrackNumber,self));$(this.options.trackInfoTbody).on('click','a[data-entity-id]',function(e){e.preventDefault();self._deleteTrackNumber.call(self,$(this).data('entity-id'));});},_addTrackNumber:function(){if(this.element.validation().valid()){$.proxy(this._poster(this.options.addLabelUrl,{'carrier':$(this.options.trackingCarrierSelect).val(),'number':$(this.options.trackingNumberInput).val()}),this);}},_deleteTrackNumber:function(number){var self=this;confirm({content:this.options.deleteMsg,actions:{confirm:function(){$.proxy(self._poster(self.options.deleteLabelUrl,{number:number}),self);}}});},_poster:function(url,data){var rmaPleaseWait=$(this.options.rmaPleaseWait),trackInfoTbody=$(this.options.trackInfoTbody),trackInfoTable=$(this.options.trackInfoTable);$.ajax({url:url,type:'post',dataType:'html',cache:false,data:data,beforeSend:function(){rmaPleaseWait.show();},success:function(resp){trackInfoTbody.html(resp).trigger('contentUpdated');},complete:function(){rmaPleaseWait.hide();trackInfoTable.decorate('table');}});}});return $.mage.rmaTrackInfo;});